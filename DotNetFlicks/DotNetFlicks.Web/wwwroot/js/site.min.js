function sortMovies(){var n=$(".dropdown-item.sort-movies.active").attr("id"),t=$("#sort-direction").attr("data-sort");tinysort("div.movie-column",{attr:n,order:t})}function initializeDepartmentPicker(){$(".department-picker").selectpicker().ajaxSelectPicker({ajax:{url:"../../Movie/GetDepartmentSelectData",data:{query:"{{{q}}}"}}})}function initializePersonPicker(){$(".person-picker").selectpicker().ajaxSelectPicker({ajax:{url:"../../Movie/GetPersonSelectData",data:{query:"{{{q}}}"}}})}function changeRowOrder(n,t){var i=n.find("input.order"),r=parseInt(i.val());i.val(r+t)}$(function(){$('[data-toggle="tooltip"]').tooltip();$(".dataTable").on("draw.dt",function(){$('[data-toggle="tooltip"]').tooltip()});initializePersonPicker();initializeDepartmentPicker();$(".image-modal").on("show.bs.modal",function(n){var t=$(n.relatedTarget),r=t.data("title"),u=t.data("img-src"),i=$(this);i.find(".modal-title").text(r);i.find("img").attr("src",u)});$(".data-table").DataTable({stateSave:!0,fixedHeader:{headerOffset:$(".navbar").outerHeight()}});$(".people-data-table").DataTable({stateSave:!0,fixedHeader:{headerOffset:$(".navbar").outerHeight()},serverSide:!0,autoWidth:!1,ajax:{url:"/Person/LoadData",type:"POST"},rowId:"Id",columns:[{className:"d-table-cell align-middle",data:"Name",render:function(n,t,i){return'<a href="Person/View/'+i.Id+'" class="custom-link">'+i.Name+"<\/a >"}},{className:"d-none d-md-table-cell align-middle",orderable:!1,render:function(n,t,i){return i.ImageUrl?'<button type="button" class="btn btn-secondary" data-toggle="modal" data-target=".image-modal" data-title="'+i.Name+'" data-img-src="'+i.ImageUrl+'"><i class="fas fa-image"><\/i><\/button>':""}},{className:"d-none d-md-table-cell",orderable:!0,data:"Roles.length",render:function(n,t,i){return'<button type="button" class="btn btn-secondary" data-toggle="tooltip" data-html="true" title="'+i.RolesTooltip+'">'+i.Roles.length+"<\/button >"}},{orderable:!1,render:function(n,t,i){return'<div class="d-flex"><a class="btn btn-primary ml-2" href="Person/Edit/'+i.Id+'"><i class="fas fa-edit"><\/i><\/a><a class="btn btn-primary ml-2" href="Person/Delete/'+i.Id+'"><i class="fas fa-trash"><\/i><\/a><\/div >'}}]});$(document).on("click",".sort-movies",function(){$(".dropdown-item.sort-movies.active").removeClass("active text-white");$(this).addClass("active text-white");$("#sort-movies-dropdown").text(this.text);sortMovies()});$("#sort-direction").on("click",function(){$(this).attr("data-sort",$(this).attr("data-sort")==="desc"?"asc":"desc");$(this).find("[data-fa-i2svg]").toggleClass("fa-arrow-up").toggleClass("fa-arrow-down");sortMovies()});$(".collapse-card").on("click",function(){$(this).find("[data-fa-i2svg]").toggleClass("fa-chevron-up").toggleClass("fa-chevron-down")});$(document).on("click",".add-cast-member",function(){var n=$("#cast-table tbody tr").length;$.ajax({url:"../../Movie/AddCastMember",data:{index:n},type:"GET"}).done(function(n){$("#cast-table tbody").append(n);initializePersonPicker()})});$(".people-table").on("click",".delete-cast-member",function(){$(this).closest("td").find(".is-deleted").val("true");var n=$(this).closest("tr");n.hide();n.nextAll().each(function(n,t){changeRowOrder(t,-1)})});$(".order-up, .order-down").click(function(){var n=$(this).closest("tr"),t=parseInt(n.find("input.order").val()),i=$("#crew-table tbody tr").length-1;$(this).is(".order-up")&&t!==0?(changeRowOrder(n,-1),changeRowOrder(n.prev(),1),n.insertBefore(n.prev())):t!==i&&(changeRowOrder(n,1),changeRowOrder(n.next(),-1),n.insertAfter(n.next()))});$(document).on("click",".add-crew-member",function(){var n=$("#crew-table tbody tr").length;$.ajax({url:"../../Movie/AddCrewMember",data:{index:n},type:"GET"}).done(function(n){$("#crew-table tbody").append(n);initializePersonPicker();initializeDepartmentPicker()})});$(".people-table").on("click",".delete-crew-member",function(){$(this).closest("td").find(".is-deleted").val("true");$(this).closest("tr").hide()})});